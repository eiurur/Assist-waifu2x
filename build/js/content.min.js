!function(){var downloadOriginImage,post2CorsServer,qs;return downloadOriginImage=function(params){var filename;return filename=params.url.match(".+/(.+?)([?#;].*)?$")[1],chrome.downloads.download({url:params.url,filename:filename},function(downloadId){return void 0})},post2CorsServer=function(params){return $.ajax({type:"POST",url:"https://aw2x.eiurur.xyz/api/download/waifu2x",data:params,headers:{"Access-Control-Allow-Origin":"*"}}).done(function(data){return data.error?(qs.isAllowedDownloadOriginalSize&&downloadOriginImage({data:data,url:params.url}),void chrome.runtime.sendMessage({data:data,uid:qs.uid,status:"failure"},function(response){return void 0})):(eiurur.utils.saveBlobImage({data:data.body.data,type:data.type}),chrome.runtime.sendMessage({data:data,uid:qs.uid,status:"success"},function(response){return void 0}))}).fail(function(jqXHR,textStatus){return chrome.runtime.sendMessage({uid:qs.uid,status:"failure"},function(response){return void 0})})},qs=eiurur.utils.getUrlVars(),"undefined"===qs.style&&(qs.style="art"),"undefined"===qs.noise&&(qs.noise=2),"undefined"===qs.scale&&(qs.scale=2),("undefined"===qs.isAllowedDownloadOriginalSize||"false"===qs.isAllowedDownloadOriginalSize)&&(qs.isAllowedDownloadOriginalSize=!1),post2CorsServer({url:qs.srcUrl,style:qs.style,noise:qs.noise-0,scale:qs.scale-0})}();