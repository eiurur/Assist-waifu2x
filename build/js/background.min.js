$(function(){var clickHandler,notify;return clickHandler=function(info,tab){return chrome.storage.sync.get("aw2x_noise",function(item){return info.noise=item.aw2x_noise,chrome.storage.sync.get("aw2x_scale",function(item){var uid;return info.scale=item.aw2x_scale,uid=Date.now(),chrome.tabs.create({url:"../build/views/views/asyncpost.html?uid="+uid+"&srcUrl="+info.srcUrl+"&noise="+info.noise+"&scale="+info.scale,active:!1},function(tab){return void 0})})})},chrome.contextMenus.create({title:"image to waifu2x",contexts:["image"],id:"image"}),chrome.contextMenus.onClicked.addListener(clickHandler),notify=function(params,callback){var opts;return opts={title:params.title,message:params.message,type:"basic",iconUrl:"../build/images/icon128.png"},chrome.notifications.create(opts,function(){return void 0})},chrome.runtime.onMessage.addListener(function(request,sender,sendResponse){return chrome.tabs.getAllInWindow(null,function(tabs){return tabs.forEach(function(tab){return-1!==tab.url.indexOf(request.uid)?("success"===request.status&&setTimeout(function(){return chrome.tabs.remove(tab.id,function(){return void 0})},1e3),"failure"===request.status?setTimeout(function(){return chrome.tabs.remove(tab.id,function(){return void 0}),notify({title:"Failure",message:request.data.error.text+"\n\n"+request.data.body.url})},1e3):void 0):void 0})})})});